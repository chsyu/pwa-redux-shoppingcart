{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chi-shanyu/Desktop/36-PWAShoppingCart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/chi-shanyu/Desktop/36-PWAShoppingCart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/chi-shanyu/Desktop/36-PWAShoppingCart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{BEGIN_ORDER_CREATE,SUCCESS_ORDER_CREATE,FAIL_ORDER_CREATE,SAVE_SHIPPING_ADDRESS,SAVE_PAYMENT_METHOD,RESET_ORDER,BEGIN_ORDER_DETAIL,SUCCESS_ORDER_DETAIL,FAIL_ORDER_DETAIL}from\"../utils/constants\";import{createOrderApi,getOrderById}from\"../api\";export var saveShippingAddress=function saveShippingAddress(shippingAddress){return function(dispatch){dispatch({type:SAVE_SHIPPING_ADDRESS,payload:shippingAddress});localStorage.setItem(\"shippingAddress\",JSON.stringify(shippingAddress));};};export var savePaymentMethod=function savePaymentMethod(paymentMethod){return function(dispatch){dispatch({type:SAVE_PAYMENT_METHOD,payload:paymentMethod.paymentMethod});};};export var createOrder=function createOrder(cart,userInfo){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var item,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:BEGIN_ORDER_CREATE});_context.prev=1;item=_objectSpread({orderItems:cart.cartItems,shippingAddress:cart.shippingAddress,paymentMethod:cart.paymentMethod,itemsPrice:cart.itemsPrice,shippingPrice:cart.shippingPrice,taxPrice:cart.taxPrice,totalPrice:cart.totalPrice},userInfo);_context.next=5;return createOrderApi(item,userInfo.access_token);case 5:res=_context.sent;if(!(res.status===200)){_context.next=12;break;}dispatch({type:SUCCESS_ORDER_CREATE,payload:res.order});localStorage.setItem(\"orderInfo\",JSON.stringify(res.order));return _context.abrupt(\"return\",res.order);case 12:dispatch({type:FAIL_ORDER_CREATE,payload:\"\".concat(res.status,\" error!\\n        \").concat(res.detail)});return _context.abrupt(\"return\",null);case 14:_context.next=21;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](1);console.log(_context.t0);dispatch({type:FAIL_ORDER_CREATE,payload:_context.t0});return _context.abrupt(\"return\",null);case 21:case\"end\":return _context.stop();}}},_callee,null,[[1,16]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var requestOrderDetail=function requestOrderDetail(orderId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:BEGIN_ORDER_DETAIL});_context2.prev=1;_context2.next=4;return getOrderById(orderId);case 4:res=_context2.sent;if(!(res.status===200)){_context2.next=11;break;}dispatch({type:SUCCESS_ORDER_DETAIL,payload:res.order});localStorage.setItem(\"orderInfo\",JSON.stringify(res.order));return _context2.abrupt(\"return\",res.order);case 11:dispatch({type:FAIL_ORDER_DETAIL,payload:\"\".concat(res.status,\" error!\\n        \").concat(res.detail)});return _context2.abrupt(\"return\",null);case 13:_context2.next=18;break;case 15:_context2.prev=15;_context2.t0=_context2[\"catch\"](1);dispatch({type:FAIL_ORDER_DETAIL,payload:_context2.t0});case 18:case\"end\":return _context2.stop();}}},_callee2,null,[[1,15]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var resetOrder=function resetOrder(){return function(dispatch){dispatch({type:RESET_ORDER});};};","map":{"version":3,"sources":["/Users/chi-shanyu/Desktop/36-PWAShoppingCart/src/actions/orderActions.js"],"names":["BEGIN_ORDER_CREATE","SUCCESS_ORDER_CREATE","FAIL_ORDER_CREATE","SAVE_SHIPPING_ADDRESS","SAVE_PAYMENT_METHOD","RESET_ORDER","BEGIN_ORDER_DETAIL","SUCCESS_ORDER_DETAIL","FAIL_ORDER_DETAIL","createOrderApi","getOrderById","saveShippingAddress","shippingAddress","dispatch","type","payload","localStorage","setItem","JSON","stringify","savePaymentMethod","paymentMethod","createOrder","cart","userInfo","item","orderItems","cartItems","itemsPrice","shippingPrice","taxPrice","totalPrice","access_token","res","status","order","detail","console","log","requestOrderDetail","orderId","resetOrder"],"mappings":"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","sourcesContent":["import {\n  BEGIN_ORDER_CREATE,\n  SUCCESS_ORDER_CREATE,\n  FAIL_ORDER_CREATE,\n  SAVE_SHIPPING_ADDRESS,\n  SAVE_PAYMENT_METHOD,\n  RESET_ORDER,\n  BEGIN_ORDER_DETAIL,\n  SUCCESS_ORDER_DETAIL,\n  FAIL_ORDER_DETAIL,\n} from \"../utils/constants\";\nimport {\n  createOrderApi,\n  getOrderById,\n} from \"../api\";\n\nexport const saveShippingAddress = (shippingAddress) => (dispatch) => {\n  dispatch({\n    type: SAVE_SHIPPING_ADDRESS,\n    payload: shippingAddress,\n  });\n  localStorage.setItem(\"shippingAddress\", JSON.stringify(shippingAddress));\n};\n\nexport const savePaymentMethod = (paymentMethod) => (dispatch) => {\n  dispatch({\n    type: SAVE_PAYMENT_METHOD,\n    payload: paymentMethod.paymentMethod,\n  });\n};\n\nexport const createOrder = (cart, userInfo) => async (dispatch) => {\n  dispatch({ type: BEGIN_ORDER_CREATE });\n  try {\n    const item = {\n      orderItems: cart.cartItems,\n      shippingAddress: cart.shippingAddress,\n      paymentMethod: cart.paymentMethod,\n      itemsPrice: cart.itemsPrice,\n      shippingPrice: cart.shippingPrice,\n      taxPrice: cart.taxPrice,\n      totalPrice: cart.totalPrice,\n      ...userInfo,\n    };\n    const res = await createOrderApi(item, userInfo.access_token);\n\n    if (res.status === 200) {\n      dispatch({\n        type: SUCCESS_ORDER_CREATE,\n        payload: res.order,\n      });\n      localStorage.setItem(\"orderInfo\", JSON.stringify(res.order));\n      return res.order;\n    } else {\n      dispatch({\n        type: FAIL_ORDER_CREATE,\n        payload: `${res.status} error!\n        ${res.detail}`,\n      });\n      return null;\n    }\n  } catch (error) {\n    console.log(error);\n    dispatch({ type: FAIL_ORDER_CREATE, payload: error });\n    return null;\n  }\n};\n\nexport const requestOrderDetail = (orderId) => async (dispatch) => {\n  dispatch({ type: BEGIN_ORDER_DETAIL });\n  try {\n    const res = await getOrderById(orderId);\n\n    if (res.status === 200) {\n      dispatch({\n        type: SUCCESS_ORDER_DETAIL,\n        payload: res.order,\n      });\n      localStorage.setItem(\"orderInfo\", JSON.stringify(res.order));\n      return res.order;\n    } else {\n      dispatch({\n        type: FAIL_ORDER_DETAIL,\n        payload: `${res.status} error!\n        ${res.detail}`,\n      });\n      return null;\n    }\n  } catch (error) {\n    dispatch({\n      type: FAIL_ORDER_DETAIL,\n      payload: error,\n    });\n  }\n};\n\nexport const resetOrder = () => (dispatch) => {\n  dispatch({ type: RESET_ORDER });\n};\n"]},"metadata":{},"sourceType":"module"}