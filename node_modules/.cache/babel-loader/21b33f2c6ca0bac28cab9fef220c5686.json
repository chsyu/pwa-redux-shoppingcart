{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chi-shanyu/Desktop/36-PWAShoppingCart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/chi-shanyu/Desktop/36-PWAShoppingCart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/chi-shanyu/Desktop/36-PWAShoppingCart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link,useHistory}from\"react-router-dom\";import{Form,Input,Button,Checkbox}from'antd';import{WarningOutlined,MailOutlined,LockOutlined}from'@ant-design/icons';import{login,rememberLoginUser}from\"../actions/userActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LoginCard=function LoginCard(_ref){var redirect=_ref.redirect;var _useSelector=useSelector(function(state){return state.userSignin;}),userInfo=_useSelector.userInfo,loading=_useSelector.loading,error=_useSelector.error,remember=_useSelector.remember;var dispatch=useDispatch();var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var history=useHistory();// const onFinishFailed = () => {\n//   console.log(\"Failed: \", error);\n// };\nvar onFinish=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"Received values of form: \",values);_context.prev=1;_context.next=4;return dispatch(login(values));case 4:_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[1,6]]);}));return function onFinish(_x){return _ref2.apply(this,arguments);};}();var onChange=function onChange(e){dispatch(rememberLoginUser(e.target.checked));};useEffect(function(){if(userInfo)history.push(redirect);},[userInfo]);// eslint-disable-line react-hooks/exhaustive-deps\nreturn/*#__PURE__*/_jsxs(Form,{name:\"normal_login\",className:\"login-form\",form:form,initialValues:{remember:true},onFinish:onFinish// onFihishFailed={onFinishFailed}\n,children:[/*#__PURE__*/_jsx(Form.Item,{name:\"email\",rules:[{type:\"email\",message:\"The input is not valid E-mail!\"},{required:true,message:\"Please input your E-mail!\"}],hasFeedback:true,children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(MailOutlined,{className:\"site-form-item-icon\"}),placeholder:\"E-Mail\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"password\",rules:[{required:true,message:\"Please input your Password!\"}],hasFeedback:true,children:/*#__PURE__*/_jsx(Input.Password,{prefix:/*#__PURE__*/_jsx(LockOutlined,{className:\"site-form-item-icon\"}),type:\"password\",placeholder:\"Password\"})}),/*#__PURE__*/_jsxs(Form.Item,{children:[/*#__PURE__*/_jsx(Form.Item,{name:\"remember\",valuePropName:\"checked\",noStyle:true,children:/*#__PURE__*/_jsx(Checkbox,{onChange:onChange,checked:remember,children:\"Remember me\"})}),/*#__PURE__*/_jsx(Link,{className:\"login-form__forgot\",to:\"/\",children:\"Forgot password\"})]}),/*#__PURE__*/_jsxs(Form.Item,{children:[loading?/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",className:\"login-form__button\",loading:true,children:\"Log in\"}):/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",className:\"login-form__button\",children:\"Log in\"}),\"Or \",/*#__PURE__*/_jsx(Link,{to:\"/register?redirect=shipping\",children:\"register now!\"}),error===\"\"?/*#__PURE__*/_jsx(_Fragment,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"login-form__error-wrap\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"login-form__error-title\",children:[/*#__PURE__*/_jsx(WarningOutlined,{className:\"site-form-item-icon\"}),\"  \",\"There was a problem\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"login-form__error-message\",children:error})]})]})]});};;export default LoginCard;","map":{"version":3,"sources":["/Users/chi-shanyu/Desktop/36-PWAShoppingCart/src/components/LoginCard.js"],"names":["React","useEffect","useDispatch","useSelector","Link","useHistory","Form","Input","Button","Checkbox","WarningOutlined","MailOutlined","LockOutlined","login","rememberLoginUser","LoginCard","redirect","state","userSignin","userInfo","loading","error","remember","dispatch","useForm","form","history","onFinish","values","console","log","onChange","e","target","checked","push","type","message","required"],"mappings":"seAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,OAASC,IAAT,CAAeC,KAAf,CAAsBC,MAAtB,CAA8BC,QAA9B,KAA8C,MAA9C,CACA,OAASC,eAAT,CAA0BC,YAA1B,CAAwCC,YAAxC,KAA4D,mBAA5D,CACA,OAASC,KAAT,CAAgBC,iBAAhB,KAAyC,wBAAzC,C,6IAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,kBACab,WAAW,CACxD,SAACc,KAAD,QAAWA,CAAAA,KAAK,CAACC,UAAjB,EADwD,CADxB,CAC1BC,QAD0B,cAC1BA,QAD0B,CAChBC,OADgB,cAChBA,OADgB,CACPC,KADO,cACPA,KADO,CACAC,QADA,cACAA,QADA,CAIlC,GAAMC,CAAAA,QAAQ,CAAGrB,WAAW,EAA5B,CAJkC,kBAMnBI,IAAI,CAACkB,OAAL,EANmB,gDAM3BC,IAN2B,mBAOlC,GAAMC,CAAAA,OAAO,CAAGrB,UAAU,EAA1B,CAEA;AACA;AACA;AAEA,GAAMsB,CAAAA,QAAQ,2FAAG,iBAAOC,MAAP,kHACfC,OAAO,CAACC,GAAR,CAAY,2BAAZ,CAAyCF,MAAzC,EADe,sCAGPL,CAAAA,QAAQ,CAACV,KAAK,CAACe,MAAD,CAAN,CAHD,sFAKbC,OAAO,CAACC,GAAR,cALa,mEAAH,kBAARH,CAAAA,QAAQ,6CAAd,CAUA,GAAMI,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,CAAD,CAAO,CACtBT,QAAQ,CAACT,iBAAiB,CAACkB,CAAC,CAACC,MAAF,CAASC,OAAV,CAAlB,CAAR,CACD,CAFD,CAKAjC,SAAS,CAAC,UAAM,CACd,GAAIkB,QAAJ,CAAcO,OAAO,CAACS,IAAR,CAAanB,QAAb,EACf,CAFQ,CAEN,CAACG,QAAD,CAFM,CAAT,CAEgB;AAEhB,mBACE,MAAC,IAAD,EACE,IAAI,CAAC,cADP,CAEE,SAAS,CAAC,YAFZ,CAGE,IAAI,CAAEM,IAHR,CAIE,aAAa,CAAE,CACbH,QAAQ,CAAE,IADG,CAJjB,CAOE,QAAQ,CAAEK,QACV;AARF,wBAUE,KAAC,IAAD,CAAM,IAAN,EACE,IAAI,CAAC,OADP,CAEE,KAAK,CAAE,CACL,CACES,IAAI,CAAE,OADR,CAEEC,OAAO,CAAE,gCAFX,CADK,CAKL,CACEC,QAAQ,CAAE,IADZ,CAEED,OAAO,CAAE,2BAFX,CALK,CAFT,CAYE,WAAW,KAZb,uBAcE,KAAC,KAAD,EACE,MAAM,cAAE,KAAC,YAAD,EAAc,SAAS,CAAC,qBAAxB,EADV,CAEE,WAAW,CAAC,QAFd,EAdF,EAVF,cA6BE,KAAC,IAAD,CAAM,IAAN,EACE,IAAI,CAAC,UADP,CAEE,KAAK,CAAE,CACL,CACEC,QAAQ,CAAE,IADZ,CAEED,OAAO,CAAE,6BAFX,CADK,CAFT,CAQE,WAAW,KARb,uBAUE,KAAC,KAAD,CAAO,QAAP,EACE,MAAM,cAAE,KAAC,YAAD,EAAc,SAAS,CAAC,qBAAxB,EADV,CAEE,IAAI,CAAC,UAFP,CAGE,WAAW,CAAC,UAHd,EAVF,EA7BF,cA6CE,MAAC,IAAD,CAAM,IAAN,yBACE,KAAC,IAAD,CAAM,IAAN,EAAW,IAAI,CAAC,UAAhB,CAA2B,aAAa,CAAC,SAAzC,CAAmD,OAAO,KAA1D,uBACE,KAAC,QAAD,EAAU,QAAQ,CAAEN,QAApB,CAA8B,OAAO,CAAET,QAAvC,yBADF,EADF,cAOE,KAAC,IAAD,EAAM,SAAS,CAAC,oBAAhB,CAAqC,EAAE,CAAE,GAAzC,6BAPF,GA7CF,cAyDE,MAAC,IAAD,CAAM,IAAN,YACGF,OAAO,cACN,KAAC,MAAD,EACE,IAAI,CAAC,SADP,CAEE,QAAQ,CAAC,QAFX,CAGE,SAAS,CAAC,oBAHZ,CAIE,OAAO,KAJT,oBADM,cAUN,KAAC,MAAD,EACE,IAAI,CAAC,SADP,CAEE,QAAQ,CAAC,QAFX,CAGE,SAAS,CAAC,oBAHZ,oBAXJ,oBAmBK,KAAC,IAAD,EAAM,EAAE,CAAE,6BAAV,2BAnBL,CAoBGC,KAAK,GAAK,EAAV,cACC,kBADD,cAGC,aAAK,SAAS,CAAC,wBAAf,wBACE,YAAI,SAAS,CAAC,yBAAd,wBACE,KAAC,eAAD,EAAiB,SAAS,CAAC,qBAA3B,EADF,CAEG,IAFH,yBADF,cAKE,UAAG,SAAS,CAAC,2BAAb,UAA0CA,KAA1C,EALF,GAvBJ,GAzDF,GADF,CA4FD,CA5HD,CA4HE,CACF,cAAeN,CAAAA,SAAf","sourcesContent":["import React, {useEffect} from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { Form, Input, Button, Checkbox } from 'antd';\nimport { WarningOutlined, MailOutlined, LockOutlined } from '@ant-design/icons';\nimport { login, rememberLoginUser } from \"../actions/userActions\";\n\nconst LoginCard = ({ redirect }) => {\n  const { userInfo, loading, error, remember } = useSelector(\n    (state) => state.userSignin\n  );\n  const dispatch = useDispatch();\n\n  const [form] = Form.useForm();\n  const history = useHistory();\n\n  // const onFinishFailed = () => {\n  //   console.log(\"Failed: \", error);\n  // };\n\n  const onFinish = async (values) => {\n    console.log(\"Received values of form: \", values);\n    try {\n      await dispatch(login(values));\n    } catch (e) {\n      console.log(e)\n    }\n\n  };\n\n  const onChange = (e) => {\n    dispatch(rememberLoginUser(e.target.checked));\n  };  \n\n\n  useEffect(() => {\n    if (userInfo) history.push(redirect);\n  }, [userInfo]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <Form\n      name=\"normal_login\"\n      className=\"login-form\"\n      form={form}\n      initialValues={{\n        remember: true,\n      }}\n      onFinish={onFinish}\n      // onFihishFailed={onFinishFailed}\n    >\n      <Form.Item\n        name=\"email\"\n        rules={[\n          {\n            type: \"email\",\n            message: \"The input is not valid E-mail!\",\n          },\n          {\n            required: true,\n            message: \"Please input your E-mail!\",\n          },\n        ]}\n        hasFeedback\n      >\n        <Input\n          prefix={<MailOutlined className=\"site-form-item-icon\" />}\n          placeholder=\"E-Mail\"\n        />\n      </Form.Item>\n      <Form.Item\n        name=\"password\"\n        rules={[\n          {\n            required: true,\n            message: \"Please input your Password!\",\n          },\n        ]}\n        hasFeedback\n      >\n        <Input.Password\n          prefix={<LockOutlined className=\"site-form-item-icon\" />}\n          type=\"password\"\n          placeholder=\"Password\"\n        />\n      </Form.Item>\n      <Form.Item>\n        <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\n          <Checkbox onChange={onChange} checked={remember}>\n            Remember me\n          </Checkbox>\n        </Form.Item>\n\n        <Link className=\"login-form__forgot\" to={\"/\"}>\n          Forgot password\n        </Link>\n      </Form.Item>\n\n      <Form.Item>\n        {loading ? (\n          <Button\n            type=\"primary\"\n            htmlType=\"submit\"\n            className=\"login-form__button\"\n            loading\n          >\n            Log in\n          </Button>\n        ) : (\n          <Button\n            type=\"primary\"\n            htmlType=\"submit\"\n            className=\"login-form__button\"\n          >\n            Log in\n          </Button>\n        )}\n        Or <Link to={\"/register?redirect=shipping\"}>register now!</Link>\n        {error === \"\" ? (\n          <></>\n        ) : (\n          <div className=\"login-form__error-wrap\">\n            <h3 className=\"login-form__error-title\">\n              <WarningOutlined className=\"site-form-item-icon\" />\n              {\"  \"}There was a problem\n            </h3>\n            <p className=\"login-form__error-message\">{error}</p>\n          </div>\n        )}\n      </Form.Item>\n    </Form>\n  );\n};;\nexport default LoginCard;\n"]},"metadata":{},"sourceType":"module"}