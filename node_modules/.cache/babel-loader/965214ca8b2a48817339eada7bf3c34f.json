{"ast":null,"code":"import _regeneratorRuntime from\"/Users/chi-shanyu/Desktop/36-PWAShoppingCart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/chi-shanyu/Desktop/36-PWAShoppingCart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import jsonInfo from\"../json/jsonInfo.json\";var URL=\"https://fastapi-heroku-2021.herokuapp.com/api/v1\";export var getProductById=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(productId){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(URL,\"/products/id/\").concat(productId));case 2:data=_context.sent;return _context.abrupt(\"return\",data.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getProductById(_x){return _ref.apply(this,arguments);};}();export var getProducts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(url){var collection,collectionName,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:collection=jsonInfo.find(function(element){return element.url===url;});collectionName=collection.name||\"allProducts\";console.log(\"getProducts API with url = \".concat(collectionName));if(!(collectionName===\"allProducts\")){_context2.next=9;break;}_context2.next=6;return axios.get(\"\".concat(URL,\"/products/all\"));case 6:data=_context2.sent;_context2.next=12;break;case 9:_context2.next=11;return axios.get(\"\".concat(URL,\"/products/\").concat(collectionName));case 11:data=_context2.sent;case 12:console.log(\"data from API = \");console.log(data);return _context2.abrupt(\"return\",data.data);case 15:case\"end\":return _context2.stop();}}},_callee2);}));return function getProducts(_x2){return _ref2.apply(this,arguments);};}();export var signInWithEmailPassword=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(email,password){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.post(\"\".concat(URL,\"/users/signin\"),{email:email,password:password});case 3:res=_context3.sent;return _context3.abrupt(\"return\",{status:res.status,user:res.data});case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);return _context3.abrupt(\"return\",{status:_context3.t0.response.status,detail:_context3.t0.response.data.detail});case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function signInWithEmailPassword(_x3,_x4){return _ref3.apply(this,arguments);};}();export var registerWithEmailPassword=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(email,password,username){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.post(\"\".concat(URL,\"/users/register\"),{email:email,password:password,username:username});case 3:res=_context4.sent;return _context4.abrupt(\"return\",{status:res.status,user:res.data});case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);return _context4.abrupt(\"return\",{status:_context4.t0.response.status,detail:_context4.t0.response.data.detail});case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function registerWithEmailPassword(_x5,_x6,_x7){return _ref4.apply(this,arguments);};}();export var updateProfile=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(username,password,address,tel,access_token,user_id){var res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.put(\"\".concat(URL,\"/users/update\"),{user_id:user_id,username:username,password:password,address:address,tel:tel},{headers:{Authorization:\"Bearer \".concat(access_token)}});case 3:res=_context5.sent;return _context5.abrupt(\"return\",{status:res.status,user:res.data});case 7:_context5.prev=7;_context5.t0=_context5[\"catch\"](0);return _context5.abrupt(\"return\",{status:_context5.t0.response.status,detail:_context5.t0.response.data.detail});case 10:case\"end\":return _context5.stop();}}},_callee5,null,[[0,7]]);}));return function updateProfile(_x8,_x9,_x10,_x11,_x12,_x13){return _ref5.apply(this,arguments);};}();export var createOrderApi=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(order,access_token){var res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return axios.post(\"\".concat(URL,\"/orders/create\"),order,{headers:{Authorization:\"Bearer \".concat(access_token)}});case 3:res=_context6.sent;return _context6.abrupt(\"return\",{status:res.status,order:res.data});case 7:_context6.prev=7;_context6.t0=_context6[\"catch\"](0);return _context6.abrupt(\"return\",{status:_context6.t0.response.status,detail:_context6.t0.response.data.detail});case 10:case\"end\":return _context6.stop();}}},_callee6,null,[[0,7]]);}));return function createOrderApi(_x14,_x15){return _ref6.apply(this,arguments);};}();export var getOrderById=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(orderId){var res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return axios.get(\"\".concat(URL,\"/orders/id/\").concat(orderId));case 3:res=_context7.sent;return _context7.abrupt(\"return\",{status:res.status,order:res.data});case 7:_context7.prev=7;_context7.t0=_context7[\"catch\"](0);return _context7.abrupt(\"return\",{status:_context7.t0.response.status,detail:_context7.t0.response.data.detail});case 10:case\"end\":return _context7.stop();}}},_callee7,null,[[0,7]]);}));return function getOrderById(_x16){return _ref7.apply(this,arguments);};}();","map":{"version":3,"sources":["/Users/chi-shanyu/Desktop/36-PWAShoppingCart/src/api/index.js"],"names":["axios","jsonInfo","URL","getProductById","productId","get","data","getProducts","url","collection","find","element","collectionName","name","console","log","signInWithEmailPassword","email","password","post","res","status","user","response","detail","registerWithEmailPassword","username","updateProfile","address","tel","access_token","user_id","put","headers","Authorization","createOrderApi","order","getOrderById","orderId"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport jsonInfo from \"../json/jsonInfo.json\";\n\nconst URL = \"https://fastapi-heroku-2021.herokuapp.com/api/v1\";\n\nexport const getProductById = async (productId) => {\n  // REFERENCE PRODUCTS COLLECTION\n  let data = await axios.get(`${URL}/products/id/${productId}`);\n  return data.data;\n};\n\nexport const getProducts = async (url) => {\n  const collection = jsonInfo.find((element) => element.url === url);\n  const collectionName = collection.name || \"allProducts\";\n  console.log(`getProducts API with url = ${collectionName}`);\n  let data;\n  // QUERY PRODUCTS\n  if (collectionName === \"allProducts\")\n    data = await axios.get(`${URL}/products/all`);\n  else data = await axios.get(`${URL}/products/${collectionName}`);\n  console.log(\"data from API = \");\n  console.log(data);\n  return data.data;\n};\n\nexport const signInWithEmailPassword = async (email, password) => {\n  try {\n    let res = await axios.post(`${URL}/users/signin`, { email, password });\n    return { status: res.status, user: res.data };\n  } catch (err) {\n    return { status: err.response.status, detail: err.response.data.detail };\n  }\n};\n\nexport const registerWithEmailPassword = async (email, password, username) => {\n  try {\n    let res = await axios.post(`${URL}/users/register`, {\n      email,\n      password,\n      username,\n    });\n    return { status: res.status, user: res.data };\n  } catch (err) {\n    return { status: err.response.status, detail: err.response.data.detail };\n  }\n};\n\nexport const updateProfile = async (username, password, address, tel, access_token, user_id) => {\n  try {\n    let res = await axios.put(\n      `${URL}/users/update`,\n      {\n        user_id,\n        username,\n        password,\n        address,\n        tel,\n      },\n      {\n        headers: { Authorization: `Bearer ${access_token}` },\n      }\n    );\n    return { status: res.status, user: res.data };\n  } catch (err) {\n    return { status: err.response.status, detail: err.response.data.detail };\n  }  \n}\n\nexport const createOrderApi = async (order, access_token) => {\n\n  try {\n    const res = await axios.post(\n      `${URL}/orders/create`,order ,\n      {\n        headers: { Authorization: `Bearer ${access_token}` },\n      }\n    );\n    return { status: res.status, order: res.data };\n  } catch (err) {\n    return { status: err.response.status, detail: err.response.data.detail };\n  }\n\n};\n\n\nexport const getOrderById = async (orderId) => {\n  try {\n    let res = await axios.get(`${URL}/orders/id/${orderId}`);\n    return { status: res.status, order: res.data };    \n  } catch (err) {\n    return { status: err.response.status, detail: err.response.data.detail };\n  }\n\n};\n"]},"metadata":{},"sourceType":"module"}