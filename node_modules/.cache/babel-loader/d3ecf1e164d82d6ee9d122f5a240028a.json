{"ast":null,"code":"import{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useHistory}from\"react-router-dom\";import{Row,Col,Button,Spin}from\"antd\";import{LoadingOutlined}from\"@ant-design/icons\";import{createOrder,resetOrder}from\"../actions/orderActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function PlaceOrderCard(){var cart=useSelector(function(state){return state.cart;});var _useSelector=useSelector(function(state){return state.userSignin;}),userInfo=_useSelector.userInfo;var _useSelector2=useSelector(function(state){return state.orderInfo;}),loading=_useSelector2.loading,success=_useSelector2.success,order=_useSelector2.order;var cartItems=cart.cartItems;var dispatch=useDispatch();var history=useHistory();var antIcon=/*#__PURE__*/_jsx(LoadingOutlined,{style:{fontSize:80,color:\"#8183ff\"},spin:true});var placeOrderHandler=function placeOrderHandler(){dispatch(createOrder(cart,userInfo));// history.push(\"/order\");\n};var getTotalPrice=function getTotalPrice(){return cartItems.length>0?cartItems.reduce(function(sum,item){return sum+item.price*item.qty;},0):0;};var toPrice=function toPrice(num){return Number(num.toFixed(2));};// 5.123 => \"5.12\" => 5.12\ncart.itemsPrice=toPrice(cart.cartItems.reduce(function(a,c){return a+c.qty*c.price;},0));cart.shippingPrice=cart.itemsPrice>100?toPrice(0):toPrice(10);cart.taxPrice=toPrice(0.15*cart.itemsPrice);cart.totalPrice=cart.itemsPrice+cart.shippingPrice+cart.taxPrice;useEffect(function(){if(success){dispatch(resetOrder());// requestOrderDetail(dispatch, order.id)\nhistory.push(\"/order/\".concat(order.id));}},[success]);// eslint-disable-line react-hooks/exhaustive-deps\nreturn/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"spinner-wrap\",children:/*#__PURE__*/_jsx(Spin,{indicator:antIcon,className:\"spinner\"})}):/*#__PURE__*/_jsxs(Row,{gutter:[24,24],children:[/*#__PURE__*/_jsxs(Col,{xs:{span:20,offset:2},lg:{span:13,offset:2},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:\"white\"},children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",cart.shippingAddress.fullName,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Address: \"}),\" \",cart.shippingAddress.address,\",\",cart.shippingAddress.city,\", \",cart.shippingAddress.postalCode,\",\",cart.shippingAddress.country]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:\"white\"},children:\"Payment\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method:\"}),\" \",cart.paymentMethod]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:\"white\"},children:\"Order Items\"}),cartItems.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"Cart is empty\"}):cartItems.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{className:\"cart-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-image\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-name\",children:item.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-qty\",children:[\"Qty: \",item.qty]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-item-end\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-price\",children:[\"$\",item.price*item.qty]})})]},item.id);}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-total-price-wrap\",children:[\"Total\",/*#__PURE__*/_jsxs(\"div\",{className:\"cart-total-price\",children:[\"$\",getTotalPrice()]})]})]})]}),/*#__PURE__*/_jsx(Col,{xs:{span:20,offset:2},lg:{span:7,offset:0},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:\"white\"},children:\"Order Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Items\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",cart.itemsPrice]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",cart.shippingPrice]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Tax\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"$\",cart.taxPrice]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\" Order Total\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"$\",cart.totalPrice]})})]}),/*#__PURE__*/_jsx(Button,{className:\"primary-btn\",block:true,type:\"primary\",onClick:placeOrderHandler,children:\"Place Order\"})]})})]})});}","map":{"version":3,"sources":["/Users/chi-shanyu/Desktop/36-PWAShoppingCart/src/components/PlaceOrderCard.js"],"names":["useEffect","useDispatch","useSelector","useHistory","Row","Col","Button","Spin","LoadingOutlined","createOrder","resetOrder","PlaceOrderCard","cart","state","userSignin","userInfo","orderInfo","loading","success","order","cartItems","dispatch","history","antIcon","fontSize","color","placeOrderHandler","getTotalPrice","length","reduce","sum","item","price","qty","toPrice","num","Number","toFixed","itemsPrice","a","c","shippingPrice","taxPrice","totalPrice","push","id","span","offset","shippingAddress","fullName","address","city","postalCode","country","paymentMethod","map","image","name"],"mappings":"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","sourcesContent":["import { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { useHistory } from \"react-router-dom\";\nimport { Row, Col, Button, Spin } from \"antd\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\nimport { createOrder, resetOrder } from \"../actions/orderActions\";\n\nexport default function PlaceOrderCard() {\n  const cart = useSelector((state) => state.cart);\n  const { userInfo } = useSelector((state) => state.userSignin);\n  const { loading, success, order } = useSelector((state) => state.orderInfo);\n\n  const { cartItems } = cart;\n  const dispatch = useDispatch();\n\n  const history = useHistory();\n  const antIcon = (\n    <LoadingOutlined style={{ fontSize: 80, color: \"#8183ff\" }} spin />\n  );\n\n  const placeOrderHandler = () => {\n    dispatch(createOrder(cart, userInfo));\n    // history.push(\"/order\");\n  };\n\n  const getTotalPrice = () => {\n    return cartItems.length > 0\n      ? cartItems.reduce((sum, item) => sum + item.price * item.qty, 0)\n      : 0;\n  };\n\n  const toPrice = (num) => Number(num.toFixed(2)); // 5.123 => \"5.12\" => 5.12\n  cart.itemsPrice = toPrice(\n    cart.cartItems.reduce((a, c) => a + c.qty * c.price, 0)\n  );\n  cart.shippingPrice = cart.itemsPrice > 100 ? toPrice(0) : toPrice(10);\n  cart.taxPrice = toPrice(0.15 * cart.itemsPrice);\n  cart.totalPrice = cart.itemsPrice + cart.shippingPrice + cart.taxPrice;\n\n  useEffect(() => {\n    if (success) {\n      dispatch(resetOrder());\n      // requestOrderDetail(dispatch, order.id)\n      history.push(`/order/${order.id}`);\n    }\n  }, [success]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <>\n      {loading ? (\n        <div className=\"spinner-wrap\">\n          <Spin indicator={antIcon} className=\"spinner\" />\n        </div>\n      ) : (\n        <Row gutter={[24, 24]}>\n          <Col xs={{ span: 20, offset: 2 }} lg={{ span: 13, offset: 2 }}>\n            <div className=\"card card-body\">\n              <h2 style={{ color: \"white\" }}>Shipping</h2>\n              <p>\n                <strong>Name:</strong> {cart.shippingAddress.fullName} <br />\n                <strong>Address: </strong> {cart.shippingAddress.address},\n                {cart.shippingAddress.city}, {cart.shippingAddress.postalCode},\n                {cart.shippingAddress.country}\n              </p>\n            </div>\n            <div className=\"card card-body\">\n              <h2 style={{ color: \"white\" }}>Payment</h2>\n              <p>\n                <strong>Method:</strong> {cart.paymentMethod}\n              </p>\n            </div>\n            <div className=\"card card-body\">\n              <h2 style={{ color: \"white\" }}>Order Items</h2>\n              {cartItems.length === 0 ? (\n                <div>Cart is empty</div>\n              ) : (\n                cartItems.map((item) => (\n                  <li key={item.id} className=\"cart-item\">\n                    <div className=\"cart-image\">\n                      <img src={item.image} alt={item.name} />\n                    </div>\n                    <div className=\"cart-item-content\">\n                      <div className=\"cart-name\">{item.name}</div>\n                      <div className=\"product-qty\">Qty: {item.qty}</div>\n                    </div>\n                    <div className=\"cart-item-end\">\n                      <div className=\"cart-price\">${item.price * item.qty}</div>\n                    </div>\n                  </li>\n                ))\n              )}\n              <div className=\"cart-total-price-wrap\">\n                Total\n                <div className=\"cart-total-price\">${getTotalPrice()}</div>\n              </div>\n            </div>\n          </Col>\n          <Col xs={{ span: 20, offset: 2 }} lg={{ span: 7, offset: 0 }}>\n            <div className=\"card card-body\">\n              <h2 style={{ color: \"white\" }}>Order Summary</h2>\n              <div className=\"row\">\n                <div>Items</div>\n                <div>${cart.itemsPrice}</div>\n              </div>\n              <div className=\"row\">\n                <div>Shipping</div>\n                <div>${cart.shippingPrice}</div>\n              </div>\n              <div className=\"row\">\n                <div>Tax</div>\n                <div>${cart.taxPrice}</div>\n              </div>\n              <div className=\"row\">\n                <div>\n                  <strong> Order Total</strong>\n                </div>\n                <div>\n                  <strong>${cart.totalPrice}</strong>\n                </div>\n              </div>\n              <Button\n                className=\"primary-btn\"\n                block\n                type=\"primary\"\n                onClick={placeOrderHandler}\n              >\n                Place Order\n              </Button>\n            </div>\n          </Col>\n        </Row>\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}