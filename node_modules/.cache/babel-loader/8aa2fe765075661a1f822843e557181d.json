{"ast":null,"code":"import { BEGIN_ORDER_CREATE, SUCCESS_ORDER_CREATE, FAIL_ORDER_CREATE, SAVE_SHIPPING_ADDRESS, SAVE_PAYMENT_METHOD, RESET_ORDER, BEGIN_ORDER_DETAIL, SUCCESS_ORDER_DETAIL, FAIL_ORDER_DETAIL } from \"../utils/constants\";\nimport { createOrderApi, getOrderById } from \"../api\";\nexport const saveShippingAddress = shippingAddress => dispatch => {\n  dispatch({\n    type: SAVE_SHIPPING_ADDRESS,\n    payload: shippingAddress\n  });\n  localStorage.setItem(\"shippingAddress\", JSON.stringify(shippingAddress));\n};\nexport const savePaymentMethod = paymentMethod => dispatch => {\n  dispatch({\n    type: SAVE_PAYMENT_METHOD,\n    payload: paymentMethod.paymentMethod\n  });\n};\nexport const createOrder = (cart, userInfo) => async dispatch => {\n  dispatch({\n    type: BEGIN_ORDER_CREATE\n  });\n\n  try {\n    const item = {\n      orderItems: cart.cartItems,\n      shippingAddress: cart.shippingAddress,\n      paymentMethod: cart.paymentMethod,\n      itemsPrice: cart.itemsPrice,\n      shippingPrice: cart.shippingPrice,\n      taxPrice: cart.taxPrice,\n      totalPrice: cart.totalPrice,\n      ...userInfo\n    };\n    const res = await createOrderApi(item, userInfo.access_token);\n\n    if (res.status === 200) {\n      dispatch({\n        type: SUCCESS_ORDER_CREATE,\n        payload: res.order\n      });\n      localStorage.setItem(\"orderInfo\", JSON.stringify(res.order));\n      return res.order;\n    } else {\n      dispatch({\n        type: FAIL_ORDER_CREATE,\n        payload: `${res.status} error!\n        ${res.detail}`\n      });\n      return null;\n    }\n  } catch (error) {\n    console.log(error);\n    dispatch({\n      type: FAIL_ORDER_CREATE,\n      payload: error\n    });\n    return null;\n  }\n};\nexport const requestOrderDetail = orderId => async dispatch => {\n  dispatch({\n    type: BEGIN_ORDER_DETAIL\n  });\n\n  try {\n    const res = await getOrderById(orderId);\n\n    if (res.status === 200) {\n      dispatch({\n        type: SUCCESS_ORDER_DETAIL,\n        payload: res.order\n      });\n      localStorage.setItem(\"orderInfo\", JSON.stringify(res.order));\n      return res.order;\n    } else {\n      dispatch({\n        type: FAIL_ORDER_DETAIL,\n        payload: `${res.status} error!\n        ${res.detail}`\n      });\n      return null;\n    }\n  } catch (error) {\n    dispatch({\n      type: FAIL_ORDER_DETAIL,\n      payload: error\n    });\n  }\n};\nexport const resetOrder = () => dispatch => {\n  dispatch({\n    type: RESET_ORDER\n  });\n};","map":{"version":3,"sources":["/Users/chi-shanyu/Desktop/36-PWAShoppingCart/src/actions/orderActions.js"],"names":["BEGIN_ORDER_CREATE","SUCCESS_ORDER_CREATE","FAIL_ORDER_CREATE","SAVE_SHIPPING_ADDRESS","SAVE_PAYMENT_METHOD","RESET_ORDER","BEGIN_ORDER_DETAIL","SUCCESS_ORDER_DETAIL","FAIL_ORDER_DETAIL","createOrderApi","getOrderById","saveShippingAddress","shippingAddress","dispatch","type","payload","localStorage","setItem","JSON","stringify","savePaymentMethod","paymentMethod","createOrder","cart","userInfo","item","orderItems","cartItems","itemsPrice","shippingPrice","taxPrice","totalPrice","res","access_token","status","order","detail","error","console","log","requestOrderDetail","orderId","resetOrder"],"mappings":"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","sourcesContent":["import {\n  BEGIN_ORDER_CREATE,\n  SUCCESS_ORDER_CREATE,\n  FAIL_ORDER_CREATE,\n  SAVE_SHIPPING_ADDRESS,\n  SAVE_PAYMENT_METHOD,\n  RESET_ORDER,\n  BEGIN_ORDER_DETAIL,\n  SUCCESS_ORDER_DETAIL,\n  FAIL_ORDER_DETAIL,\n} from \"../utils/constants\";\nimport {\n  createOrderApi,\n  getOrderById,\n} from \"../api\";\n\nexport const saveShippingAddress = (shippingAddress) => (dispatch) => {\n  dispatch({\n    type: SAVE_SHIPPING_ADDRESS,\n    payload: shippingAddress,\n  });\n  localStorage.setItem(\"shippingAddress\", JSON.stringify(shippingAddress));\n};\n\nexport const savePaymentMethod = (paymentMethod) => (dispatch) => {\n  dispatch({\n    type: SAVE_PAYMENT_METHOD,\n    payload: paymentMethod.paymentMethod,\n  });\n};\n\nexport const createOrder = (cart, userInfo) => async (dispatch) => {\n  dispatch({ type: BEGIN_ORDER_CREATE });\n  try {\n    const item = {\n      orderItems: cart.cartItems,\n      shippingAddress: cart.shippingAddress,\n      paymentMethod: cart.paymentMethod,\n      itemsPrice: cart.itemsPrice,\n      shippingPrice: cart.shippingPrice,\n      taxPrice: cart.taxPrice,\n      totalPrice: cart.totalPrice,\n      ...userInfo,\n    };\n    const res = await createOrderApi(item, userInfo.access_token);\n\n    if (res.status === 200) {\n      dispatch({\n        type: SUCCESS_ORDER_CREATE,\n        payload: res.order,\n      });\n      localStorage.setItem(\"orderInfo\", JSON.stringify(res.order));\n      return res.order;\n    } else {\n      dispatch({\n        type: FAIL_ORDER_CREATE,\n        payload: `${res.status} error!\n        ${res.detail}`,\n      });\n      return null;\n    }\n  } catch (error) {\n    console.log(error);\n    dispatch({ type: FAIL_ORDER_CREATE, payload: error });\n    return null;\n  }\n};\n\nexport const requestOrderDetail = (orderId) => async (dispatch) => {\n  dispatch({ type: BEGIN_ORDER_DETAIL });\n  try {\n    const res = await getOrderById(orderId);\n\n    if (res.status === 200) {\n      dispatch({\n        type: SUCCESS_ORDER_DETAIL,\n        payload: res.order,\n      });\n      localStorage.setItem(\"orderInfo\", JSON.stringify(res.order));\n      return res.order;\n    } else {\n      dispatch({\n        type: FAIL_ORDER_DETAIL,\n        payload: `${res.status} error!\n        ${res.detail}`,\n      });\n      return null;\n    }\n  } catch (error) {\n    dispatch({\n      type: FAIL_ORDER_DETAIL,\n      payload: error,\n    });\n  }\n};\n\nexport const resetOrder = () => (dispatch) => {\n  dispatch({ type: RESET_ORDER });\n};\n"]},"metadata":{},"sourceType":"module"}